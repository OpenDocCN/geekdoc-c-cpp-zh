["```rs\n#include <iostream>\n\ntemplate <typename T>\nstruct Shape {\n  // This implementation is shared and can call\n  // the area method from derived classes without\n  // declaring it virtual.\n  double twiceArea() {\n    return 2.0 * static_cast<T *>(this)->area();\n  }\n};\n\nstruct Triangle : public Shape<Triangle> {\n  double base;\n  double height;\n\n  Triangle(double base, double height)\n      : base(base), height(height) {}\n\n  double area() {\n    return 0.5 * base * height;\n  }\n};\n\nstruct Square : public Shape<Square> {\n  double side;\n\n  Square(double side) : side(side) {}\n\n  double area() {\n    return side * side;\n  }\n};\n\nint main() {\n  Triangle triangle{2.0, 1.0};\n  Square square{2.0};\n\n  std::cout << triangle.twiceArea() << std::endl;\n  std::cout << square.twiceArea() << std::endl;\n} \n```", "```rs\n\n```", "```rs\n\n```", "```rs\n#include <iostream>\n#include <span>\n#include <string>\n#include <vector>\n\n// D is the type of the derived class\ntemplate <typename D>\nstruct Combinable {\n  D combineWith(D &d);\n\n  // concat is implemented in the base class, but\n  // operates on values of the derived class.\n  D concat(std::span<D> vec) {\n    D acc(*static_cast<D *>(this));\n\n    for (D &v : vec) {\n      acc = acc.combineWith(v);\n    }\n\n    return acc;\n  }\n};\n\nstruct Sum : Combinable<Sum> {\n  int sum;\n\n  Sum(int sum) : sum(sum) {}\n\n  Sum combineWith(Sum s) {\n    return Sum(sum + s.sum);\n  }\n\n  // Sum includes an additional method that can be\n  // chained.\n  Sum mult(int n) {\n    return Sum(sum * n);\n  }\n};\n\nint main() {\n  Sum s(0);\n  std::vector<Sum> v{1, 2, 3, 4};\n  Sum x = s.concat(v)\n              // Even though concat is part of the\n              // base class, it returns a value of\n              // the implementing class, making it\n              // possible to chain methods\n              // specific to that class.\n              .mult(2)\n              .combineWith(5);\n  std::cout << x.sum << std::endl;\n} \n```", "```rs\n\n```", "```rs\n\n```"]