["```cpp\n[](#cb1-1)int val = 1;\n[](#cb1-2)setsockopt(fd, SOL_SOCKET, SO_REUSEADDR, &val, sizeof(val));\n```", "```cpp\n[](#cb2-1)    // bind, this is the syntax that deals with IPv4 addresses\n[](#cb2-2)    struct sockaddr_in addr = {};\n[](#cb2-3)    addr.sin_family = AF_INET;\n[](#cb2-4)    addr.sin_port = ntohs(1234);\n[](#cb2-5)    addr.sin_addr.s_addr = ntohl(0);    // wildcard address 0.0.0.0\n[](#cb2-6)    int rv = bind(fd, (const sockaddr *)&addr, sizeof(addr));\n[](#cb2-7)    if (rv) {\n[](#cb2-8)        die(\"bind()\");\n[](#cb2-9)    }\n[](#cb2-10)\n[](#cb2-11)    // listen\n[](#cb2-12)    rv = listen(fd, SOMAXCONN);\n[](#cb2-13)    if (rv) {\n[](#cb2-14)        die(\"listen()\");\n[](#cb2-15)    }\n```", "```cpp\n[](#cb3-1)    while (true) {\n[](#cb3-2)        // accept\n[](#cb3-3)        struct sockaddr_in client_addr = {};\n[](#cb3-4)        socklen_t socklen = sizeof(client_addr);\n[](#cb3-5)        int connfd = accept(fd, (struct sockaddr *)&client_addr, &socklen);\n[](#cb3-6)        if (connfd < 0) {\n[](#cb3-7)            continue;   // error\n[](#cb3-8)        }\n[](#cb3-9)\n[](#cb3-10)        do_something(connfd);\n[](#cb3-11)        close(connfd);\n[](#cb3-12)    }\n```", "```cpp\n[](#cb4-1)static void do_something(int connfd) {\n[](#cb4-2)    char rbuf[64] = {};\n[](#cb4-3)    ssize_t n = read(connfd, rbuf, sizeof(rbuf) - 1);\n[](#cb4-4)    if (n < 0) {\n[](#cb4-5)        msg(\"read() error\");\n[](#cb4-6)        return;\n[](#cb4-7)    }\n[](#cb4-8)    printf(\"client says: %s\\n\", rbuf);\n[](#cb4-9)\n[](#cb4-10)    char wbuf[] = \"world\";\n[](#cb4-11)    write(connfd, wbuf, strlen(wbuf));\n[](#cb4-12)}\n```", "```cpp\n[](#cb5-1)    int fd = socket(AF_INET, SOCK_STREAM, 0);\n[](#cb5-2)    if (fd < 0) {\n[](#cb5-3)        die(\"socket()\");\n[](#cb5-4)    }\n[](#cb5-5)\n[](#cb5-6)    struct sockaddr_in addr = {};\n[](#cb5-7)    addr.sin_family = AF_INET;\n[](#cb5-8)    addr.sin_port = ntohs(1234);\n[](#cb5-9)    addr.sin_addr.s_addr = ntohl(INADDR_LOOPBACK);  // 127.0.0.1\n[](#cb5-10)    int rv = connect(fd, (const struct sockaddr *)&addr, sizeof(addr));\n[](#cb5-11)    if (rv) {\n[](#cb5-12)        die(\"connect\");\n[](#cb5-13)    }\n[](#cb5-14)\n[](#cb5-15)    char msg[] = \"hello\";\n[](#cb5-16)    write(fd, msg, strlen(msg));\n[](#cb5-17)\n[](#cb5-18)    char rbuf[64] = {};\n[](#cb5-19)    ssize_t n = read(fd, rbuf, sizeof(rbuf) - 1);\n[](#cb5-20)    if (n < 0) {\n[](#cb5-21)        die(\"read\");\n[](#cb5-22)    }\n[](#cb5-23)    printf(\"server says: %s\\n\", rbuf);\n[](#cb5-24)    close(fd);\n```", "```cpp\n[](#cb6-1)g++ -Wall -Wextra -O2 -g 03_server.cpp -o server\n[](#cb6-2)g++ -Wall -Wextra -O2 -g 03_client.cpp -o client\n```", "```cpp\n[](#cb7-1)$ ./server\n[](#cb7-2)client says: hello\n```", "```cpp\n[](#cb8-1)$ ./client\n[](#cb8-2)server says: world\n```"]